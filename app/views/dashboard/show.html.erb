
<% @user.tracked_subjects.each do |subject| %>
  <ul>
    <li class="mouse"><%= link_to "Mouse ##{subject.mouse.original_id}", mouse_path(subject.mouse.original_id) %></li>
    <%= link_to "Untrack", tracked_subject_path(original_id: subject.mouse.original_id), method: :delete %></li>
  </ul>
<% end %>
</br>

Ploidy <%= select_tag 'ploidy', options_for_select(["N/A", "Trisomic", "Disomic"]) %>
Diet <%= select_tag 'diet', options_for_select(["N/A", "Rapamycin", "Control"]) %>

<%= submit_tag "Search", {:class => 'query'} %>

<canvas id="myChart" width="1600" height="900"></canvas>

<script>
// can i do two query calls on click?
// why isn't jquery working?

  $('.query').on("click", getQueryMice)

  var API = "http://localhost:3000";

  function getQueryMice()  {
    var ploidy = $('.ploidy option:selected').text();
    var diet = $('.diet option:selected').text();
    console.log(ploidy)
    console.log(diet)
    fetch(`${API}/api/v1/mice/find?trisomic=${ploidy}&diet=${diet}`)
      .then(response => response.json())
      .then(data => console.log(data))
  }



  var ctx = document.getElementById("myChart");
  var myChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: [1,2,3],
      datasets: [
        {
          data: [1,2,3]
        }
      ]
    }
  });



</script>
